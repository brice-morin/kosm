<html lang="en">

<!--<script type="text/javascript" src="../../../target/js/kotlin-lib-ecma5.js"></script>
<script type="text/javascript" src="../../../target/js/kotlin-lib.js"></script>
<script type="text/javascript" src="../../../target/js/kotlin-maps.js"></script>
<script type="text/javascript" src="../../../target/js/org.sintef.kosm.js"></script>-->
<script type="text/javascript" src="../../../target/js/kosm.min.js"></script>
<script>
			var kt = Kotlin.modules['org.sintef.kosm'];

            Kotlin.println('Test');
			console.log('Test');

			
			Kotlin.println('Creating states');
			console.log('Creating states');
			
            var s1 = new kt.org.sintef.kosm.State('s1', new kt.org.sintef.kosm.DefaultStateAction());
            var s2 = new kt.org.sintef.kosm.State('s2', new kt.org.sintef.kosm.DefaultStateAction());
            var states = new Kotlin.ArrayList();
            states.add(s1);
            states.add(s2);
            
			
			Kotlin.println('Creating event types');
			console.log('Creating event types');

			var et1 = new kt.org.sintef.kosm.EventType('a');
            var et2 = new kt.org.sintef.kosm.EventType('b');
            var et3 = new kt.org.sintef.kosm.EventType('c');
			
			
			Kotlin.println('Creating events');
			console.log('Creating events');
			
            var e1 = new kt.org.sintef.kosm.Event(et1);
            var e2 = new kt.org.sintef.kosm.Event(et2);
            var e3 = new kt.org.sintef.kosm.Event(et3);
			
			
			Kotlin.println('Creating transitions');
			console.log('Creating transitions');

            var transitions = new Kotlin.ArrayList();
            var t1 = new kt.org.sintef.kosm.AutoTransition(s1, s2, new kt.org.sintef.kosm.DefaultHandlerAction());
            transitions.add(t1);
            var t2 = new kt.org.sintef.kosm.Transition(s2, s1, new kt.org.sintef.kosm.DefaultHandlerAction(), et3);
            transitions.add(t2);
            var internals = new Kotlin.ArrayList();
            var it1 = new kt.org.sintef.kosm.InternalTransition(s2, new kt.org.sintef.kosm.DefaultHandlerAction(), et2);
            internals.add(it1);
            
			
			Kotlin.println('Creating state machine');
			console.log('Creating state machine');
			
			var sm = new kt.org.sintef.kosm.StateMachine(new kt.org.sintef.kosm.DefaultStateAction(), 'State Machine', void 0, states, s1, internals, transitions);
            
			
			Kotlin.println('Creating component');
			console.log('Creating component');
			
			var inEvents = new Kotlin.ArrayList();
            inEvents.add(et1);
            inEvents.add(et2);
            inEvents.add(et3);
            var outEvents = new Kotlin.ArrayList();
            var p = new kt.org.sintef.kosm.Port('p', kt.org.sintef.kosm.PortType.object.PROVIDED, inEvents, outEvents);
            var ports = new Kotlin.ArrayList();
            ports.add(p);
            var c = new kt.org.sintef.kosm.Component('component', ports, sm);
			
			
			Kotlin.println('Starting component');
			console.log('Starting component');
            
			c.start();
			
			
			Kotlin.println('Sending some events');
			console.log('Sending some events');
            
			Kotlin.println(' sm.current (s2) = ' + sm.current.name);
			console.log(' sm.current (s2) = ' + sm.current.name);
            p.receive(e1);
			Kotlin.println(' sm.current (s2) = ' + sm.current.name);
			console.log(' sm.current (s2) = ' + sm.current.name);
            p.receive(e1);
			Kotlin.println(' sm.current (s2) = ' + sm.current.name);
			console.log(' sm.current (s2) = ' + sm.current.name);
            p.receive(e2);
			Kotlin.println(' sm.current (s2) = ' + sm.current.name);
			console.log(' sm.current (s2) = ' + sm.current.name);
            p.receive(e1);
			Kotlin.println(' sm.current (s2) = ' + sm.current.name);
			console.log(' sm.current (s2) = ' + sm.current.name);
            p.receive(e3);
</script>
</html>